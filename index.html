<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<title>MeuFlix</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Roboto',sans-serif; background:#141414; color:#fff; }

header { position: fixed; top:0; left:0; width:100%; height:60px; background:#141414; display:flex; align-items:center; justify-content:flex-start; padding:0 40px; z-index:1000; box-shadow:0 2px 5px rgba(0,0,0,0.5); }
header h1 { color:#e50914; font-size:24px; cursor:pointer; }
nav { display:flex; gap:15px; margin-left: 15px; }
nav div { cursor:pointer; transition:color .2s; }
nav div:hover { color:#e50914; text-decoration:underline; }

/* Barra de pesquisa */
#searchContainer { margin-left:auto; display:flex; align-items:center; position:relative; }
#searchContainer input { padding:6px 12px; border-radius:4px; border:none; outline:none; font-size:14px; display:none; transition: width .3s; width:150px; }
#searchContainer.show-input input { display:block; }
#searchContainer button { padding:6px 12px; margin-left:5px; border:none; border-radius:4px; background:#e50914; color:#fff; cursor:pointer; font-weight:bold; transition:background .2s; }
#searchContainer button:hover { background:#b20710; }

/* Banner e demais estilos continuam iguais */
.banner { position: relative; width:100%; height:70vh; display:flex; flex-direction:column; justify-content:flex-end; padding:40px; overflow:hidden; }
.banner::after { content:''; position:absolute; top:0; left:0; width:100%; height:100%; background:linear-gradient(to top, rgba(20,20,20,0.9) 0%, rgba(20,20,20,0) 60%); z-index:1; }
.banner-content { position:relative; z-index:2; max-width:600px; display:flex; flex-direction:column; gap:15px; }
.banner h1 { font-size:48px; margin-bottom:10px; }
.banner p { font-size:18px; margin-bottom:20px; }
.banner-content button { width:160px; padding:12px 0; font-size:16px; border:none; border-radius:5px; cursor:pointer; font-weight:bold; transition: background .2s; }
.banner-content button.play { background:#fff; color:#000; }
.banner-content button.play:hover { background:#ddd; }
.banner-content button.lista { background:rgba(109,109,110,0.7); color:#fff; }
.banner-content button.lista:hover { background:rgba(109,109,110,0.5); }

#root { margin-top:80px; }

.fila-container { margin:20px 50px; position:relative; }
.fila-titulo { font-size:20px; margin-bottom:10px; font-weight:bold; }
.fila { display:flex; overflow-x:auto; gap:16px; padding-bottom:10px; scroll-behavior:smooth; scrollbar-width:none; }
.fila::-webkit-scrollbar { display:none; }
.filme { width:180px; height:270px; border-radius:5px; overflow:hidden; cursor:pointer; position:relative; flex-shrink:0; transition:transform .3s; }
.filme:hover { transform:scale(1.08); z-index:2; }
.filme img { width:100%; height:100%; object-fit:cover; display:block; }

.filme-hover-overlay { position:absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.7); display:flex; justify-content:center; align-items:center; gap:10px; opacity:0; transition:opacity .3s; flex-direction:column; border-radius:5px; z-index:5; }
.filme:hover .filme-hover-overlay { opacity:1; }
.filme-hover-overlay button { width:100px; padding:8px 0; background:#e50914; border:none; color:#fff; font-weight:bold; cursor:pointer; border-radius:4px; transition: background .2s; }
.filme-hover-overlay button:hover { background:#b20710; }

.add-list-btn { position:absolute; bottom:5px; right:5px; width:30px; height:30px; border-radius:50%; border:none; background:#e50914; color:#fff; font-weight:bold; cursor:pointer; font-size:18px; z-index:6; transition: background .2s; opacity:0; }
.filme:hover .add-list-btn { opacity:1; }

.btn-scroll { position:absolute; top:50%; transform:translateY(-50%); background:rgba(0,0,0,.6); border:none; color:#fff; font-size:30px; width:40px; height:80px; cursor:pointer; z-index:10; border-radius:4px; display:flex; align-items:center; justify-content:center; }
.btn-scroll:hover { background:rgba(229,9,20,.8); }
.btn-left { left:0; }
.btn-right { right:0; }

.modal { display:none; position:fixed; z-index:10000; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.85); justify-content:center; align-items:center; }
.modal-content { background:#222; padding:25px; border-radius:10px; max-width:500px; width:90%; text-align:center; }
.modal h2 { margin-bottom:20px; }
.episodio-btn, .temporada-btn { display:block; margin:10px 0; padding:12px; background:#e50914; border:none; border-radius:5px; color:#fff; cursor:pointer; font-size:16px; width:100%; transition:background .2s; }
.episodio-btn:hover, .temporada-btn:hover { background:#b20710; }
.close-btn { margin-top:15px; padding:10px 20px; background:#555; border:none; border-radius:5px; color:#fff; cursor:pointer; transition:background .2s; }
.close-btn:hover { background:#333; }

.toast-container { position: fixed; bottom: 20px; right: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 20000; }
.toast { background: rgba(51, 51, 51, 0.95); color: #fff; padding: 12px 20px; border-radius: 5px; min-width: 220px; max-width: 300px; font-size: 14px; font-weight: bold; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 2px 8px rgba(0,0,0,0.7); opacity: 0; transform: translateX(100%); animation: slideIn 0.5s forwards, fadeOut 0.5s forwards 3s; }
.toast button { background: none; border: none; color: #e50914; font-weight: bold; cursor: pointer; margin-left: 10px; }
@keyframes slideIn { to { opacity: 1; transform: translateX(0); } }
@keyframes fadeOut { to { opacity: 0; transform: translateX(100%); } }

.filme .remove-continuar-btn {
  position: absolute;
  top: 5px;
  right: 5px;
  width: 25px;
  height: 25px;
  background-color: black;
  color: white;
  border: none;
  border-radius: 50%;
  cursor: pointer;
  z-index: 7;
  opacity: 0;
  transition: opacity 0.3s;
}
.filme:hover .remove-continuar-btn { opacity: 1; }
</style>
</head>
<body>

<header>
<h1>MeuFlix</h1>
<nav>
<div onclick="mostrarSecao('inicio')">P√°gina Inicial</div>
<div onclick="mostrarSecao('series')">S√©ries</div>
<div onclick="mostrarSecao('filmes')">Filmes</div>
<div onclick="mostrarSecao('terror')">Terror</div>
<div onclick="mostrarSecao('lista')">A Minha Lista</div>
</nav>
<!-- Barra de pesquisa -->
<div id="searchContainer">
  <input type="text" id="searchInput" placeholder="Pesquisar...">
  <button id="searchButton">üîç</button>
</div>
</header>

<div class="banner">
  <img id="bannerImage" src="https://images.justwatch.com/poster/334324389/s718/lilo-and-stitch-2025.jpg" style="width:100%; height:100%; object-fit:cover; position:absolute; top:0; left:0; z-index:0;">
  <video id="bannerVideo" style="display:none; width:100%; height:100%; object-fit:cover; position:absolute; top:0; left:0; z-index:0;" autoplay muted loop>
    <source src="http://localhost:8096/Videos/4e881aace3c877692082cd2e2f0fad64/stream.mp4?Static=true" type="video/mp4">
  </video>
  <div class="banner-content">
    <h1>Lilo & Stitch 2025</h1>
    <p>Uma anima√ß√£o divertida e emocionante para toda a fam√≠lia.</p>
    <button class="play" onclick="abrirVideo(filmes[0])">‚ñ∂ Assistir</button>
    <button class="lista" onclick="adicionarMinhaLista('Lilo & Stitch 2025')">+ Minha Lista</button>
  </div>
</div>

<div id="root"></div>

<div id="modal" class="modal">
  <div class="modal-content" id="modalContent">
    <h2 id="modalTitle">Escolha a temporada</h2>
    <div id="episodiosList"></div>
    <button class="close-btn" onclick="fecharModal()">Fechar</button>
  </div>
</div>

<div id="toastContainer" class="toast-container"></div>

<script>
let minhaLista = [];
let progresso = {};

// ===== Fun√ß√µes para localStorage =====
function salvarLista() { localStorage.setItem("minhaLista", JSON.stringify(minhaLista)); }
function carregarLista() { const lista = localStorage.getItem("minhaLista"); if(lista) minhaLista = JSON.parse(lista); }
function salvarProgresso() { localStorage.setItem("progresso", JSON.stringify(progresso)); }
function carregarProgresso() { const p = localStorage.getItem("progresso"); if(p) progresso = JSON.parse(p); }

// ===== Toast notifications =====
function mostrarToast(mensagem){
  const container = document.getElementById('toastContainer');
  const toast = document.createElement('div'); toast.className = 'toast'; toast.textContent = mensagem;
  const btn = document.createElement('button'); btn.textContent = '‚úñ'; btn.onclick = () => container.removeChild(toast);
  toast.appendChild(btn); container.appendChild(toast);
  setTimeout(() => { if(container.contains(toast)) container.removeChild(toast); }, 4000);
}

// ===== Fun√ß√µes da lista =====
function adicionarMinhaLista(titulo){
  if(!minhaLista.includes(titulo)){
    minhaLista.push(titulo); salvarLista(); mostrarToast(`"${titulo}" adicionado √† Minha Lista!`);
  } else {
    minhaLista = minhaLista.filter(t => t!==titulo); salvarLista(); mostrarToast(`"${titulo}" removido da Minha Lista!`);
  }
  mostrarSecao('inicio'); // Atualiza a p√°gina inicial imediatamente
}

// ===== Player embutido =====
function abrirVideo(item){
  const videoModal = document.createElement('div');
  videoModal.style.position='fixed';
  videoModal.style.top='0'; videoModal.style.left='0';
  videoModal.style.width='100%'; videoModal.style.height='100%';
  videoModal.style.background='rgba(0,0,0,0.9)';
  videoModal.style.display='flex'; videoModal.style.justifyContent='center'; videoModal.style.alignItems='center';
  videoModal.style.zIndex='10000';

  const videoEl = document.createElement('video');
  videoEl.src = item.link;
  videoEl.controls = true;
  videoEl.style.width='80%';
  videoEl.style.height='80%';

  if(progresso[item.titulo]) videoEl.currentTime = progresso[item.titulo];
  let terminou = false;
  videoEl.onended = () => { terminou = true; delete progresso[item.titulo]; salvarProgresso(); mostrarSecao('inicio'); };
  videoEl.ontimeupdate = () => { if(!terminou) progresso[item.titulo] = videoEl.currentTime; };

  const fecharBtn = document.createElement('button');
  fecharBtn.textContent = 'Fechar';
  fecharBtn.style.position='absolute';
  fecharBtn.style.top='20px';
  fecharBtn.style.right='20px';
  fecharBtn.style.padding='10px 20px';
  fecharBtn.style.cursor='pointer';
  fecharBtn.onclick = () => { if(!terminou) salvarProgresso(); mostrarSecao('inicio'); videoModal.remove(); };

  videoModal.appendChild(videoEl);
  videoModal.appendChild(fecharBtn);
  document.body.appendChild(videoModal);
  videoEl.play();
}

// ===== Dados =====
const filmes = [
  {titulo:"Lilo & Stitch 2025",img:"https://images.justwatch.com/poster/334324389/s718/lilo-and-stitch-2025.jpg",link:"http://localhost:8096/Videos/fd01e68f98ca97ffe2385321a8419563/stream.mp4?Static=true", trailer:"http://localhost:8096/Videos/4e881aace3c877692082cd2e2f0fad64/stream.mp4?Static=true"},
  {titulo:"O Disc√≠pulo",img:"https://imagens.publico.pt/imagens.aspx/1229973?tp=UH&db=IMAGENS&type=JPG&share=1&o=BarraFacebook_P3.png",link:"http://localhost:8096/Videos/5587dfc46083d69b9900fb4aa5e0527e/stream.mp4?Static=true", trailer:"http://localhost:8096/Videos/5587dfc46083d69b9900fb4aa5e0527e/stream.mp4?Static=true"}
];

const series = [
  {titulo:"Morangos com A√ß√∫car",img:"https://m.media-amazon.com/images/S/pv-target-images/ed2fde424fa4ab359c5a3d6aca7922c5ae84e6fd4fd3d20afd25747c0952f761.png",
   temporadas:[{numero:1,episodios:[{numero:1,link:"http://localhost:8096/Videos/6f9b24bdd4d4e2954b5a732a2e1faa05/stream.mp4?Static=true"},{numero:2,link:"http://localhost:8096/Videos/27fe974c305e13eddc29256793078530/stream.mp4?Static=true"},...Array.from({length:8},(_,i)=>({numero:i+3,link:"#"}))]},{numero:2,episodios:Array.from({length:10},(_,i)=>({numero:i+1,link:"#"}))}], trailer:"http://localhost:8096/Videos/4e881aace3c877692082cd2e2f0fad64/stream.mp4?Static=true"}
];

const filmesTerror = [
  {titulo:"A Maldi√ß√£o",img:"https://via.placeholder.com/180x270.png?text=A+Maldi%C3%A7%C3%A3o",link:"#",trailer:"#"},
  {titulo:"Noite Sombria",img:"https://via.placeholder.com/180x270.png?text=Noite+Sombria",link:"#",trailer:"#"},
  {titulo:"O Retorno do Horror",img:"https://via.placeholder.com/180x270.png?text=O+Retorno+do+Horror",link:"#",trailer:"#"}
];

// ===== Fun√ß√µes de interface =====
// ... (o restante das fun√ß√µes mostrarSecao, criarFila, abrirModalTemporadas, abrirModalEpisodios, fecharModal, pesquisar continuam iguais)

// ===== Modifica√ß√£o para lupa =====
document.getElementById('searchButton').addEventListener('click', ()=>{
  const container = document.getElementById('searchContainer');
  const input = document.getElementById('searchInput');
  if(!container.classList.contains('show-input')){
    container.classList.add('show-input');
    input.focus();
  } else {
    pesquisar();
  }
});

carregarLista(); carregarProgresso();
mostrarSecao('inicio');

window.addEventListener('load', ()=>{
  const img = document.getElementById('bannerImage');
  const video = document.getElementById('bannerVideo');
  setTimeout(()=>{ img.style.display='none'; video.style.display='block'; video.play(); },2000);
});
</script>
</body>
</html>
